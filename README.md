## grepint.el
*Generic interface to grep -*- lexical-binding: t -*-*

---
[![License GPLv3](https://img.shields.io/badge/license-GPL_v3-green.svg)](http://www.gnu.org/licenses/gpl-3.0.html)

### Description

This package solves the following problem for me:
- A single function call interface to grep and therefore keybinding.
- Selects the grep based on context: Inside a git-repository, runs
  git-grep, otherwise runs ag.
- Uses helm to select candidates and jumps to the given line with RET.

The following enables the aforementioned:

        (require 'grepint)
        (grepint-set-default-config)
        (global-set-key (kbd "C-c g") #'grepint-grep)

### Key bindings within helm

- RET selects an item and closes the helm session.
- Right arrow selects the item, but does not close the helm session. This
  is similar as `helm-occur`.

### Additional features

This has a second interactive function `grepint-grep-root`. This runs the
grepping inside a root directory. By default this has been defined for the
git-grep where it greps from the git root directory.

### Customization

Look into the function `grepint-set-default-config` to see how the default
cases are configured. Also look into `grepint-add-grep-config` for more
details on what is required for a new grep to be defined.

### Function Documentation


#### `(grepint-add-grep-config NAME &rest CONFIGURATION)`

Add configuration NAME with properties from CONFIGURATION.

The configuration can have the following items:

:command
 - A command string to run.

:arguments
 - Arguments provided for the command when it is run. This
   and :command is provided for the `grepint-run-command` function.

:enable-function
 - A function that returns non-nil if this grep can be used. If
   this is nil, the grep can be used always.

:root-directory-function
 - Function that returns a string of a directory that is regarded
   as the root directory when running `grepint-grep-root`. If
   this is nil, `grepint-grep-root` behaves exactly as `grepint-grep`.

#### `(grepint-get-grep-config NAME)`

Get the configuration associated with NAME.

#### `(grepint-grep-config-property NAME PROPERTY &rest NEW-VALUE)`

Get a config NAME's PROPERTY or set it to NEW-VALUE.
The config NAME has been added with `grepint-add-grep-config`.
Returns the current value of the property or nil if either name
or property was not found.

#### `(grepint-run-command &rest PLIST)`

Run a grep command from PLIST.

The command line is constructed with the following PLIST items:

:command :arguments :extra-arguments.

The :arguments is split on whitespace, but :extra-arguments are
used as is.

#### `(grepint-select-grep)`

Select the grep based on :enable-function from `grepint-grep-configs`.

The greps are compared in order of `grepint-grep-list`.  If the
grep does not have :enable-function property, select it
automatically.

#### `(grepint-grep-default-root)`

Get the default root directory if :root-directory-function isn't defined.

#### `(grepint-grep-parse-line LINE)`

Parse a LINE of output from grep-compatible programs.

Returns a list of (file line contents) or nil if the line could not be parsed.

#### `(grepint-grep-action-jump CANDIDATE)`

Jump to line in a file described by a grep -line CANDIDATE.

#### `(grepint-grep-process)`

This is the candidates-process for `grepint-helm-source`.

#### `(grepint-grep-filter-one-by-one CANDIDATE)`

Propertize each CANDIDATE provided by `grepint-helm-source`.

Uses `helm-grep-highlight-match` from helm-grep to provide line highlight.

#### `(grepint-grep)`

Run grep in the current directory.

The grep function is determined by the contents of
`grepint-grep-configs` and the order of `grepint-grep-list`.

#### `(grepint-grep-root)`

This function is the same as `grepint-grep`, but it runs the grep in a root directory.

#### `(grepint-set-default-config)`

Set the default grep configuration into `grepint-grep-configs` and `grepint-grep-list`.

-----
<div style="padding-top:15px;color: #d0d0d0;">
Markdown README file generated by
<a href="https://github.com/mgalgs/make-readme-markdown">make-readme-markdown.el</a>
</div>
